```bash

üîê SSH ‚Äî —É–¥–∞–ª—ë–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏ —Ç—É–Ω–Ω–µ–ª–∏

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

ssh user@host                   # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH (–ø–æ—Ä—Ç 22)
ssh -p 2222 user@host           # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
ssh -v user@host                # verbose (–ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥)
ssh -vv user@host               # –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
ssh -vvv user@host              # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
ssh -i /path/to/key user@host   # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á
ssh -o StrictHostKeyChecking=no user@host  # –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å known_hosts (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)
ssh -o ConnectTimeout=10 user@host  # —Ç–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è 10 —Å–µ–∫—É–Ω–¥
ssh -o ServerAliveInterval=60 user@host  # –¥–µ—Ä–∂–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (keepalive –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫)
ssh -o BatchMode=yes user@host  # –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞ (–¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è)
ssh -F /path/to/config user@host  # –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥

## –ö–ª—é—á–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

ssh-keygen -t ed25519           # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á Ed25519 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
ssh-keygen -t ed25519 -C "comment"  # —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º (–æ–±—ã—á–Ω–æ email)
ssh-keygen -t rsa -b 4096       # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å RSA –∫–ª—é—á 4096 –±–∏—Ç
ssh-keygen -f ~/.ssh/id_ed25519 -N ""  # –±–µ–∑ –ø–∞—Ä–æ–ª—è (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏)
ssh-keygen -l -f ~/.ssh/id_ed25519.pub  # –ø–æ–∫–∞–∑–∞—Ç—å –æ—Ç–ø–µ—á–∞—Ç–æ–∫ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
ssh-keygen -l -E sha256 -f ~/.ssh/id_ed25519  # –æ—Ç–ø–µ—á–∞—Ç–æ–∫ –≤ SHA256
ssh-keygen -p -f ~/.ssh/id_ed25519  # –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∫–ª—é—á–∞
ssh-keygen -y -f ~/.ssh/id_ed25519  # –≤—ã–≤–µ—Å—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ

## SSH-–∞–≥–µ–Ω—Ç (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π –≤ —Å–µ—Å—Å–∏–∏)

ssh-agent bash                  # –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É —Å –∞–≥–µ–Ω—Ç–æ–º
eval $(ssh-agent -s)            # –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
ssh-add ~/.ssh/id_ed25519       # –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç
ssh-add -l                      # —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
ssh-add -L                      # –ø–æ–∫–∞–∑–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –∏–∑ –∞–≥–µ–Ω—Ç–∞
ssh-add -d ~/.ssh/id_ed25519    # —É–¥–∞–ª–∏—Ç—å –∫–ª—é—á –∏–∑ –∞–≥–µ–Ω—Ç–∞
ssh-add -D                      # —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ –∞–≥–µ–Ω—Ç–∞
ssh-add -t 1h ~/.ssh/id_ed25519 # –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 1 —á–∞—Å

## –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

ssh-copy-id user@host           # —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ ~/.ssh/authorized_keys
ssh-copy-id -i ~/.ssh/id_ed25519.pub user@host  # —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
ssh-copy-id -p 2222 user@host   # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç

## –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (SCP)

scp file user@host:/remote/path  # —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ö–æ—Å—Ç
scp user@host:/remote/file .    # —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞
scp -r dir/ user@host:/remote/  # —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥
scp -P 2222 file user@host:/path  # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç (–∑–∞–≥–ª–∞–≤–Ω–∞—è P)
scp -i ~/.ssh/key file user@host:/path  # —É–∫–∞–∑–∞—Ç—å –∫–ª—é—á
scp -C file user@host:/path     # —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (rsync —á–µ—Ä–µ–∑ SSH)

rsync -avz src/ user@host:/dst/ # –∞—Ä—Ö–∏–≤–Ω–æ, —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º, —Å–∂–∞—Ç–∏–µ (—Ç–∏–ø–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
rsync -avz -e "ssh -p 2222" src/ user@host:/dst/  # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
rsync -avz --delete src/ user@host:/dst/  # –∑–µ—Ä–∫–∞–ª–æ (—É–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–µ–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
rsync -avz --exclude '*.log' src/ user@host:/dst/  # –∏—Å–∫–ª—é—á–∏—Ç—å —Ñ–∞–π–ª—ã
rsync -avz --dry-run src/ user@host:/dst/  # —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ

## SFTP (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–æ–≤)

sftp user@host                  # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SFTP
sftp -P 2222 user@host          # –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç
sftp -i ~/.ssh/key user@host    # —É–∫–∞–∑–∞—Ç—å –∫–ª—é—á
# –í–Ω—É—Ç—Ä–∏ sftp: get file, put file, lcd, cd, ls, lls, mkdir, rm, rmdir, exit

## –¢—É–Ω–Ω–µ–ª–∏ –∏ port forwarding

# –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å: –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç -> —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ö–æ—Å—Ç:–ø–æ—Ä—Ç (–¥–æ—Å—Ç—É–ø —Å –∫–ª–∏–µ–Ω—Ç–∞)
ssh -N -L 8080:localhost:80 user@host  # –ª–æ–∫–∞–ª—å–Ω–æ 8080 -> host:80
ssh -N -L 8080:otherserver:80 user@gateway  # —á–µ—Ä–µ–∑ gateway –∫ otherserver:80

# –£–¥–∞–ª—ë–Ω–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å: —É–¥–∞–ª—ë–Ω–Ω—ã–π –ø–æ—Ä—Ç -> –ª–æ–∫–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç:–ø–æ—Ä—Ç (–¥–æ—Å—Ç—É–ø —Å —Å–µ—Ä–≤–µ—Ä–∞)
ssh -N -R 8080:localhost:80 user@host  # –Ω–∞ host –ø–æ—Ä—Ç 8080 -> —Ç–≤–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π 80

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SOCKS-–ø—Ä–æ–∫—Å–∏ (–≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ SSH)
ssh -N -D 1080 user@host        # SOCKS5 –ø—Ä–æ–∫—Å–∏ –Ω–∞ localhost:1080

# –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç—É–Ω–Ω–µ–ª–µ–π –≤ –æ–¥–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ (–∏–ª–∏ —á–µ—Ä–µ–∑ ~/.ssh/config)
ssh -N -L 8080:localhost:80 -L 8443:localhost:443 user@host

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (~/.ssh/config)

# –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π –≤ ~/.ssh/config:
# Host myserver                      # –∞–ª–∏–∞—Å: –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–º–∞–Ω–¥—É ssh myserver
#     HostName 192.168.1.10          # —Ä–µ–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏–ª–∏ DNS-–∏–º—è —Å–µ—Ä–≤–µ—Ä–∞
#     User admin                     # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
#     Port 2222                      # –ø–æ—Ä—Ç SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –Ω–µ 22)
#     IdentityFile ~/.ssh/id_ed25519  # –ø—É—Ç—å –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É –∫–ª—é—á—É –¥–ª—è —ç—Ç–æ–≥–æ —Ö–æ—Å—Ç–∞
#     ServerAliveInterval 60         # –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å keepalive –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫ (–¥–µ—Ä–∂–∞—Ç—å —Å–µ—Å—Å–∏—é)
#
# Host *.internal                    # —à–∞–±–ª–æ–Ω: –≤—Å–µ —Ö–æ—Å—Ç—ã —Å –∏–º–µ–Ω–µ–º *.internal
#     User deploy                    # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–∏—Ö —Ö–æ—Å—Ç–æ–≤
#     ProxyJump bastion.example.com  # –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø—Ä—ã–∂–æ–∫-—Ö–æ—Å—Ç (bastion)
#
# Host tunnel-web                    # –∞–ª–∏–∞—Å –¥–ª—è —Ç—É–Ω–Ω–µ–ª—è
#     HostName server.example.com    # —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä
#     LocalForward 8080 localhost:80 # –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç 8080 -> localhost:80 –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
#     User dev                       # –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞

ssh myserver                    # –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ –∞–ª–∏–∞—Å—É –∏–∑ config
ssh -G myserver                 # –ø–æ–∫–∞–∑–∞—Ç—å –∏—Ç–æ–≥–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Host

## –°–µ—Ä–≤–µ—Ä SSH (sshd)

systemctl status sshd           # —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ SSH (RHEL/Fedora)
systemctl status ssh             # —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ SSH (Debian/Ubuntu)
systemctl start sshd             # –∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl restart sshd           # –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl enable sshd            # –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (–æ–±—ã—á–Ω–æ /etc/ssh/sshd_config)
cat /etc/ssh/sshd_config        # –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ñ–∏–≥–∞
sshd -t                         # –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ –æ—à–∏–±–∫–∏ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞)
# –ß–∞—Å—Ç—ã–µ –æ–ø—Ü–∏–∏: Port, PermitRootLogin, PasswordAuthentication, PubkeyAuthentication

## –ö–ª—é—á–∏ —Ö–æ—Å—Ç–∞ –∏ known_hosts

ssh-keyscan host                # –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–ø–µ—á–∞—Ç–∫–∏ –∫–ª—é—á–µ–π —Ö–æ—Å—Ç–∞
ssh-keyscan -p 2222 host        # —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞
ssh-keyscan -t ed25519 host     # —Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏ Ed25519
# –î–æ–±–∞–≤–∏—Ç—å –≤ ~/.ssh/known_hosts –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

# –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–ª—é—á —Ö–æ—Å—Ç–∞ –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh-keygen -R host              # —É–¥–∞–ª–∏—Ç—å host –∏–∑ known_hosts
ssh-keygen -R 192.168.1.10      # —É–¥–∞–ª–∏—Ç—å –ø–æ IP

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Ç–ª–∞–¥–∫–∞

ssh -v user@host                # –æ—Ç–ª–∞–¥–∫–∞: –ø–æ—á–µ–º—É –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
ssh -o PreferredAuthentications=publickey user@host  # —Ç–æ–ª—å–∫–æ –∫–ª—é—á, –±–µ–∑ –ø–∞—Ä–æ–ª—è
ssh -o PubkeyAuthentication=no user@host  # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ –ø–∞—Ä–æ–ª—é (–¥–ª—è —Ç–µ—Å—Ç–∞)
cat ~/.ssh/authorized_keys      # –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
chmod 700 ~/.ssh                # –ø—Ä–∞–≤–∞ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥ .ssh (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
chmod 600 ~/.ssh/authorized_keys  # –ø—Ä–∞–≤–∞ –Ω–∞ authorized_keys (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
chmod 600 ~/.ssh/id_ed25519     # –ø—Ä–∞–≤–∞ –Ω–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

~/.ssh/config                   # –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
/etc/ssh/ssh_config             # –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –∫–ª–∏–µ–Ω—Ç–∞
/etc/ssh/sshd_config            # –∫–æ–Ω—Ñ–∏–≥ —Å–µ—Ä–≤–µ—Ä–∞ SSH
~/.ssh/authorized_keys          # –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏
~/.ssh/known_hosts              # –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö–æ—Å—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏)
